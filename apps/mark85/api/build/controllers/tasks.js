const a1_0x14b077=a1_0x119e;(function(_0x1e5f84,_0x22eff6){const _0x31b372=a1_0x119e,_0x2b94ee=_0x1e5f84();while(!![]){try{const _0x31ef60=parseInt(_0x31b372(0x1f3))/0x1*(-parseInt(_0x31b372(0x1f5))/0x2)+-parseInt(_0x31b372(0x201))/0x3*(parseInt(_0x31b372(0x1f9))/0x4)+-parseInt(_0x31b372(0x1ed))/0x5*(parseInt(_0x31b372(0x1f6))/0x6)+parseInt(_0x31b372(0x1e8))/0x7+-parseInt(_0x31b372(0x1e2))/0x8+-parseInt(_0x31b372(0x1e1))/0x9*(parseInt(_0x31b372(0x1ea))/0xa)+parseInt(_0x31b372(0x1e9))/0xb*(parseInt(_0x31b372(0x1f1))/0xc);if(_0x31ef60===_0x22eff6)break;else _0x2b94ee['push'](_0x2b94ee['shift']());}catch(_0xfbc307){_0x2b94ee['push'](_0x2b94ee['shift']());}}}(a1_0x4285,0x4d0ad));function a1_0x4285(){const _0x10cd2b=['3849770YoiRxp','env','_id','54650tAVzZG','-date','</strong>\x20foi\x20criada\x20com\x20sucesso!</p>\x20<p>Equipe\x20Mark85</p>','findByIdAndUpdate','17350260yeMPKc','findOneAndDelete','1KDIWDj','name','1122404AsJFUQ','6mHRGRr','ValidationError','json','20iyEPUD','findOne','body','split','Duplicated\x20task!','QUEUE_NAME','email','</p><p>A\x20tarefa\x20<strong>','28503NroYWo','stringify','status','findById','9IvknaN','1253904TtCwLm','params','save','find','<p>OlÃ¡,\x20','end','217434qpRbqN','11gkqyNr'];a1_0x4285=function(){return _0x10cd2b;};return a1_0x4285();}import a1_0x2fa9e7 from'../models/task';function a1_0x119e(_0x38b8c9,_0xa06c46){const _0x428500=a1_0x4285();return a1_0x119e=function(_0x119e34,_0xd38cf9){_0x119e34=_0x119e34-0x1e0;let _0x516674=_0x428500[_0x119e34];return _0x516674;},a1_0x119e(_0x38b8c9,_0xa06c46);}import{publishToQueue}from'../services/mqservice';import'dotenv/config';const defaultQueue=process[a1_0x14b077(0x1eb)][a1_0x14b077(0x1fe)];export default{'create':async(_0x2bdd42,_0x3c8815)=>{const _0x8d02d4=a1_0x14b077,{name:_0x5c3641,tags:_0x18eaf0}=_0x2bdd42[_0x8d02d4(0x1fb)],{user:_0x449c74}=_0x2bdd42,_0x1919b7=await a1_0x2fa9e7[_0x8d02d4(0x1fa)]({'name':_0x5c3641,'user':_0x449c74[_0x8d02d4(0x1ec)]});if(_0x1919b7)return _0x3c8815[_0x8d02d4(0x203)](0x199)[_0x8d02d4(0x1f8)]({'message':_0x8d02d4(0x1fd)});const _0x2e516f=new a1_0x2fa9e7({'name':_0x5c3641,'tags':_0x18eaf0,'user':_0x449c74[_0x8d02d4(0x1ec)]});try{const _0x49e4d1=await _0x2e516f[_0x8d02d4(0x1e4)]();let _0x366cb2={'html':_0x8d02d4(0x1e6)+_0x449c74[_0x8d02d4(0x1f4)][_0x8d02d4(0x1fc)]('\x20')[0x0]+_0x8d02d4(0x200)+_0x2e516f[_0x8d02d4(0x1f4)]+_0x8d02d4(0x1ef),'email':_0x449c74[_0x8d02d4(0x1ff)]};return publishToQueue(defaultQueue,JSON[_0x8d02d4(0x202)](_0x366cb2)),_0x3c8815[_0x8d02d4(0x203)](0xc8)['json'](_0x49e4d1);}catch(_0x4f8985){if(_0x4f8985['name']==='ValidationError')return _0x3c8815[_0x8d02d4(0x203)](0x190)[_0x8d02d4(0x1f8)](_0x4f8985);return _0x3c8815[_0x8d02d4(0x203)](0x1f4)[_0x8d02d4(0x1f8)](_0x4f8985);}},'list':async(_0x34618d,_0x3ee744)=>{const _0xaf5c5=a1_0x14b077,{user:_0x220e96}=_0x34618d;let _0x48ba6e={'user':_0x220e96['_id']};_0x34618d['query'][_0xaf5c5(0x1f4)]&&(_0x48ba6e['name']=new RegExp(_0x34618d['query']['name'],'i'));const _0x17313a=await a1_0x2fa9e7[_0xaf5c5(0x1e5)](_0x48ba6e,{},{'sort':_0xaf5c5(0x1ee)});return _0x3ee744[_0xaf5c5(0x203)](0xc8)[_0xaf5c5(0x1f8)](_0x17313a);},'get':async(_0x22a8f6,_0x24c5e6)=>{const _0x509339=a1_0x14b077,{task_id:_0x3070b7}=_0x22a8f6[_0x509339(0x1e3)],{user:_0x2717b4}=_0x22a8f6,_0x2ed4d0=await a1_0x2fa9e7[_0x509339(0x1e0)]({'_id':_0x3070b7,'user':_0x2717b4[_0x509339(0x1ec)]},{},{'sort':_0x509339(0x1ee)});if(!_0x2ed4d0)return _0x24c5e6[_0x509339(0x203)](0x194)[_0x509339(0x1e7)]();return _0x24c5e6[_0x509339(0x203)](0xc8)[_0x509339(0x1f8)](_0x2ed4d0);},'remove':async(_0xce65f,_0x4b6ec6)=>{const _0xde91=a1_0x14b077,{task_id:_0x2fac20}=_0xce65f[_0xde91(0x1e3)],{user:_0x1ccd37}=_0xce65f,_0x8df436=await a1_0x2fa9e7[_0xde91(0x1f2)]({'_id':_0x2fac20,'user':_0x1ccd37[_0xde91(0x1ec)]});if(!_0x8df436)return _0x4b6ec6[_0xde91(0x203)](0x194)['end']();return _0x4b6ec6[_0xde91(0x203)](0xcc)[_0xde91(0x1e7)]();},'done':async(_0x572047,_0x1789c0)=>{const _0x4559cd=a1_0x14b077,{task_id:_0x1c31f6}=_0x572047[_0x4559cd(0x1e3)],{user:_0x3575a8}=_0x572047,_0xd1f8d8=await a1_0x2fa9e7[_0x4559cd(0x1fa)]({'_id':_0x1c31f6,'user':_0x3575a8[_0x4559cd(0x1ec)]});if(!_0xd1f8d8)return _0x1789c0[_0x4559cd(0x203)](0x194)[_0x4559cd(0x1e7)]();try{return await a1_0x2fa9e7[_0x4559cd(0x1f0)]({'_id':_0x1c31f6,'user':_0x3575a8['_id']},{'$set':{'is_done':!![]}}),_0x1789c0[_0x4559cd(0x203)](0xcc)[_0x4559cd(0x1e7)]();}catch(_0x9eb995){if(_0x9eb995['name']===_0x4559cd(0x1f7))return _0x1789c0['status'](0x190)[_0x4559cd(0x1f8)](_0x9eb995);return _0x1789c0[_0x4559cd(0x203)](0x1f4)['json'](_0x9eb995);}},'todo':async(_0x1e8b39,_0x4e8e9a)=>{const _0x27849c=a1_0x14b077,{task_id:_0x2b4359}=_0x1e8b39['params'],{user:_0x343d47}=_0x1e8b39,_0x53ffd3=await a1_0x2fa9e7[_0x27849c(0x1fa)]({'_id':_0x2b4359,'user':_0x343d47['_id']});if(!_0x53ffd3)return _0x4e8e9a[_0x27849c(0x203)](0x194)[_0x27849c(0x1e7)]();try{return await a1_0x2fa9e7['findByIdAndUpdate']({'_id':_0x2b4359,'user':_0x343d47[_0x27849c(0x1ec)]},{'$set':{'is_done':![]}}),_0x4e8e9a['status'](0xcc)[_0x27849c(0x1e7)]();}catch(_0x5ef7f4){if(_0x5ef7f4[_0x27849c(0x1f4)]===_0x27849c(0x1f7))return _0x4e8e9a[_0x27849c(0x203)](0x190)[_0x27849c(0x1f8)](_0x5ef7f4);return _0x4e8e9a[_0x27849c(0x203)](0x1f4)[_0x27849c(0x1f8)](_0x5ef7f4);}}};